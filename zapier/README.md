# Campsite Zapier App

⚠️ Note: keeping this outside the `apps` folder for now because Zapier requires Node v14.

This Zapier integration project was generated by the `zapier init` CLI command.

## Helpful commands

```bash
# Watch and compile as you edit code
pnpm dev

# Compile
pnpm build

# Compile and run tests
pnpm test

# Push updates to Zapier
pnpm push:dev
# or
pnpm push:prod
```

## Testing new versions

Zapier apps do not support a "hot reload" style of local development. To test a new version of the app in the web UI you need to push a new version.

To push a new version to our dev app, run `pnpm push:dev` to build, test, and push current version of the app. Our dev app connects to our standard ngrok server.

#### Publishing new versions

1. Bump the app version in `package.json`
2. Push to the production app using `pnpm push:prod`. **This will not make the new version public yet.**
3. Test the new private version in our own apps if necessary.
4. Run `zapier promote [version]` to make the new version public.

You can also run `zapier migrate 0.4.0 0.5.0` to move old users to the new version, which should be done for non-breaking changes.

More reading: [promote | Zapier CLI docs](https://platform.zapier.com/reference/cli#promote)

#### Handling upgrades

There are two ways to share the app before it's published: a public link and inviting users by email. We should **invite users by email** because it lets us privately test new versions before sharing them with users. With a public link, users immediately have access to any new versions pushed to Zapier, which makes it difficult to soft-launch new versions.

More reading: [Share your integration](https://platform.zapier.com/manage/sharing)

## Helpful links

- [Zapier field schema](https://github.com/zapier/zapier-platform/blob/main/packages/schema/docs/build/schema.md#fieldschema)
- [Full example JSON schema](https://github.com/zapier/zapier-platform/blob/main/packages/schema/examples/definition.json)
